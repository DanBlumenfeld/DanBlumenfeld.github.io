---
layout: layouts/base.njk
title: Configuring my daily driver using Ansible
date: 2024-12-06
categories: ["IaC","Ansible"]
tags: blog
---
<p>
Historically, I've practiced a form of infrastructure management I like to call "memory-based chaos". 
However, as I slide through middle age with increasing lack of cognitive grace, it becomes more apparent that I should let my tools work for me. 
Enter shell scripting and <a href="https://www.ansible.com/">Ansible</a> 
</p>

<h2>The goal</h2>
In my ideal world, I'd like to use the following ever-so-elaborate process to set up my daily driver:
<ol>
    <li>Install a clean copy of Ubuntu with minimal tools (including Git)</li>
    <li>Pull <a href="https://github.com/DanBlumenfeld/ansible-ubuntu-local">my repo</a></li>
    <li>Execute <a href="https://github.com/DanBlumenfeld/ansible-ubuntu-local/blob/main/local-install.sh">local-install.sh</a></li>
    <li>Answer a couple of questions, then wait</li>
</ol>


<h2>Requirements</h2>>
<ul>
    <li>It should be idempotent. I don't want to cause problems by re-running the process.</li>
    <li>It should be user friendly. The process should save my responses locally, and ask me if I wish to re-use them. (With obvious exceptions for sensitive data like passwords and access tokens, of course.)</li>
    <li>It should be designed to run locally, but with an eye towards running it against other hosts too. <em>This is more for my learning than any practical purpose, as I find it unlikely that I'll want to set up my workstation remotely</em>.</li>
    <li>Each component should be able to be run independently, with minimal upstream dependencies. This keeps things easier to use on an ad-hoc basis, as well as easier to debug.</li>
</ul>

<h2>The initial manifest</h2>
<ol>
 	<li>Ansible (Used to drive the rest of the system configuration)</li>
 	<li>Git configuration. Defines local git settings, generates SSH key, pushes said key to Github</li>
 	<li>System hardening, details TBD</li>
 	<li>Tor Browser</li>
 	<li>1Password </li>
 	<li>1Password CLI </li>
 	<li>Sublime Text </li>
 	<li>Sublime Merge </li>
 	<li>Docker and docker-compose</li>
 	<li>DevToys </li>
 	<li>Visual Studio Code</li>
 	<li>Terraform</li>
 </ol>

 <h2>How's it going so far?</h2>
 <p>Quite well, actually. </p>
 <p>I've got a seemingly decent model for the individual playbooks and associated scripts, with at least a modicum of sanity checking and convenience features.</p>
 <p>The Ansible, git config, Tor Browser, and VS Code scripts and playbooks are implemented and seem to work nicely.</p> 

 <h2>Lessons Learned</h2>
- My UniFi network <a href="/nts/unifi-and-tor/">needed some help</a> to unblock Tor traffic. Apparently. "dark web" is synonymous with "concern for privacy" in the eyes of Ubiquiti's UX designers.